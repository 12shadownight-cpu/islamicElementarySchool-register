<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Full Layout with Sticky Footer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS & Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />

    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }

      body {
        display: flex;
        font-family: 'Segoe UI', sans-serif;
        background: #f4f6f9;
      }

      h2 {
        font-weight: 600;
        margin-bottom: 20px;
        color: #333;
      }

      .info-box-container {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
      }

      .info-box {
        display: flex;
        align-items: center;
        background: #fff;
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        padding: 15px 20px;
        flex: 0 0 250px; /* fixed width instead of stretching */
        max-width: 250px; /* limit max size */
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .info-box:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      }

      .info-box .icon {
        width: 50px;
        height: 50px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-size: 22px;
        margin-right: 15px;
      }

      .info-box .content h4 {
        margin: 0;
        font-size: 14px;
        color: #555;
      }

      .info-box .content p {
        margin: 5px 0 0;
        font-weight: bold;
        font-size: 16px;
      }

      /* Colors */
      .bg-green {
        background: #28a745;
      }
      .bg-yellow {
        background: #ffc107;
      }

      .d-flex .card + .card {
        margin-left: 80px; /* adjust the px value as needed */
      }

      /* Sidebar */
      .sidebar {
        width: 250px;
        height: 100vh;
        background: linear-gradient(to bottom right, #9c27b0, #8e24aa);
        color: white;
        position: fixed;
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
      }

      .sidebar .brand {
        padding: 1.5rem;
        font-size: 1.25rem;
        font-weight: bold;
        text-align: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .nav-link {
        color: white;
        padding: 0.75rem 1.5rem;
        display: flex;
        align-items: center;
        font-weight: 500;
        transition: background 0.3s;
        cursor: pointer;
      }

      .nav-link:hover,
      .nav-link.active {
        background: rgba(255, 255, 255, 0.15);
        border-radius: 10px;
      }

      .nav-link i {
        margin-right: 1rem;
        font-size: 1.2rem;
      }

      .collapse .nav-link {
        padding-left: 3.5rem;
        font-size: 0.95rem;
      }

      .upgrade-btn {
        margin: auto 1.5rem 1.5rem 1.5rem;
        padding: 0.6rem;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        border-radius: 10px;
        color: white;
        font-weight: 600;
        text-align: center;
        transition: background 0.3s;
      }

      .upgrade-btn:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      /* Wrapper for navbar + main content + footer */
      .main-wrapper {
        margin-left: 250px;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        width: 100%;
      }

      .main-content {
        flex: 1;
        padding: 1rem;
      }

      .no-border {
        border-top: none;
        border-left: none;
        border-right: none;
      }

      footer {
        background-color: #f8f9fa;
        padding: 1rem;
        text-align: center;
        font-size: 0.9rem;
        border-top: 1px solid #dee2e6;
      }

      #pieChart1,
      #pieChart2 {
        width: 200px !important;
        height: 200px !important;
        margin: 0 auto; /* keeps chart centered inside the card */
        display: block;
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="brand">CREATIVE TIM</div>
      <nav class="nav flex-column mt-3">
        <a href="#" class="nav-link"
          ><i class="bi bi-speedometer2"></i>Dashboard</a
        >
        <a href="#" class="nav-link active"
          ><i class="bi bi-person"></i>User Profile</a
        >
        <a href="#" class="nav-link"
          ><i class="bi bi-clipboard-data"></i>Table List</a
        >

        <!-- Expandable Dropdown -->
        <a
          class="nav-link"
          data-bs-toggle="collapse"
          href="#collapseLayouts"
          role="button"
        >
          <i class="bi bi-layout-text-sidebar-reverse"></i>Layouts
          <i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <div class="collapse" id="collapseLayouts">
          <a href="#" class="nav-link">Sub Layout 1</a>
          <a href="#" class="nav-link">Sub Layout 2</a>
        </div>

        <a href="#" class="nav-link"><i class="bi bi-stars"></i>Icons</a>
        <a href="#" class="nav-link"><i class="bi bi-geo-alt"></i>Maps</a>
        <a href="#" class="nav-link"><i class="bi bi-bell"></i>Notifications</a>
      </nav>
    </div>

    <!-- Main Wrapper -->
    <div class="main-wrapper">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg bg-light shadow-sm mb-3">
        <div
          class="container-fluid d-flex justify-content-between align-items-center"
        >
          <!-- Left: Navbar Brand -->
          <span class="navbar-brand mb-0 h1">
            Welcome to Dashboard User !
          </span>

          <!-- Right: User & Logout -->
          <div class="d-flex align-items-center">
            <span class="me-3 fw-semibold"> John Doe </span>
            <a href="logout.php" class="btn btn-outline-danger btn-sm">
              <i class="bi bi-box-arrow-right me-1"></i> Logout
            </a>
          </div>
        </div>
      </nav>

      <!-- Main Content -->
      <div class="main-content container-fluid">
        <div class="px-3 py-2">
          <h2 class="fw-bold mb-1">Dashboard Widget</h2>
          <p class="text-muted">
            This widget shows the total of data record from database.
          </p>
        </div>

        <!-- Info Boxes Row -->
        <div class="row g-3 justify-content-center">
          <div class="col-md-3">
            <div class="info-box h-100">
              <div class="icon bg-green">
                <i class="fas fa-flag"></i>
              </div>
              <div class="content">
                <h4>Bookmarks</h4>
                <p>410</p>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="info-box h-100">
              <div class="icon bg-yellow">
                <i class="fas fa-upload"></i>
              </div>
              <div class="content">
                <h4>Uploads</h4>
                <p>13,648</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Charts Row -->
        <div class="row g-3 justify-content-center mt-3">
          <div class="col-md-3">
            <div class="card shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title text-center">User Engagement</h5>
                <canvas id="pieChart1"></canvas>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title text-center">Data Distribution</h5>
                <canvas id="pieChart2"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sticky Footer -->
      <footer>
        &copy; 2025 Creative Tim Inspired Layout. All rights reserved.
      </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script>
      //Prepare DataTable
      $(document).ready(function () {
        $('#example').DataTable();
      });

      // Collect data dynamically from info-boxes
      const labels = [];
      const values = [];
      const colors = ['#17a2b8', '#28a745', '#ffc107', '#dc3545']; // match icon colors

      document.querySelectorAll('.info-box').forEach((box, i) => {
        const label = box.querySelector('h4').innerText;
        const value = parseInt(
          box.querySelector('p').innerText.replace(/,/g, '')
        );
        labels.push(label);
        values.push(value);
      });

      // Calculate percentages for chart 2
      const total = values.reduce((a, b) => a + b, 0);
      const percentages = values.map((v) => ((v / total) * 100).toFixed(2));

      // Pie Chart 1 (Absolute values)
      const ctx1 = document.getElementById('pieChart1').getContext('2d');
      new Chart(ctx1, {
        type: 'pie',
        data: {
          labels: labels,
          datasets: [
            {
              label: 'User Engagement (Absolute)',
              data: values,
              backgroundColor: colors,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'bottom' },
            tooltip: {
              callbacks: {
                label: function (context) {
                  return context.label + ': ' + context.formattedValue;
                },
              },
            },
          },
        },
      });

      // Pie Chart 2 (Percentage distribution)
      const ctx2 = document.getElementById('pieChart2').getContext('2d');
      new Chart(ctx2, {
        type: 'pie',
        data: {
          labels: labels,
          datasets: [
            {
              label: 'User Engagement (%)',
              data: percentages,
              backgroundColor: colors,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'bottom' },
            tooltip: {
              callbacks: {
                label: function (context) {
                  return context.label + ': ' + context.formattedValue + '%';
                },
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
